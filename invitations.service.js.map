{"version":3,"file":"invitations.service.js","sourceRoot":"","sources":["../src/invitations.service.ts"],"names":[],"mappings":"AAIA,MAAM,OAAO,kBAAkB;IAC7B,YACS,YAA0B,EAC1B,MAAc,EACd,WAAW,aAAa;QAFxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAgB;IAC9B,CAAC;IAEJ,KAAK,CAAC,cAAc,CAAC,KAAuB;QAC1C,OAAO,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,uBAAuB;QAC3B,OAAO,IAAI,CAAC,QAAQ,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED,KAAK,CAAC,gBAAgB,CACpB,sBAAqC;QAErC,OAAO,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,CAAC;IACpE,CAAC;IAED,KAAK,CAAC,gBAAgB,CACpB,sBAAqC;QAErC,OAAO,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,CAAC;IACpE,CAAC;IAED,KAAK,CAAC,eAAe,CACnB,sBAAqC;QAErC,OAAO,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,sBAAsB,CAAC,CAAC;IACnE,CAAC;IAEO,QAAQ,CAAC,OAAe,EAAE,OAAY;QAC5C,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAChC,GAAG,EAAE,IAAW;YAChB,OAAO,EAAE,IAAI,CAAC,MAAM;YACpB,SAAS,EAAE,IAAI,CAAC,QAAQ;YACxB,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;YAChB,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SAC3B,CAAC,CAAC;IACL,CAAC;CACF","sourcesContent":["import { AgentPubKeyB64, HeaderHashB64 } from '@holochain-open-dev/core-types';\nimport { AppWebsocket, CellId } from '@holochain/conductor-api';\nimport { InvitationEntryInfo } from './types';\n\nexport class InvitationsService {\n  constructor(\n    public appWebsocket: AppWebsocket,\n    public cellId: CellId,\n    public zomeName = 'invitations'\n  ) {}\n\n  async sendInvitation(input: AgentPubKeyB64[]): Promise<void> {\n    return this.callZome('send_invitation', input);\n  }\n\n  async getMyPendingInvitations(): Promise<InvitationEntryInfo[]> {\n    return this.callZome('get_my_pending_invitations', null);\n  }\n\n  async acceptInvitation(\n    invitation_header_hash: HeaderHashB64\n  ): Promise<boolean> {\n    return this.callZome('accept_invitation', invitation_header_hash);\n  }\n\n  async rejectInvitation(\n    invitation_header_hash: HeaderHashB64\n  ): Promise<boolean> {\n    return this.callZome('reject_invitation', invitation_header_hash);\n  }\n\n  async clearInvitation(\n    invitation_header_hash: HeaderHashB64\n  ): Promise<boolean> {\n    return this.callZome('clear_invitation', invitation_header_hash);\n  }\n\n  private callZome(fn_name: string, payload: any) {\n    return this.appWebsocket.callZome({\n      cap: null as any,\n      cell_id: this.cellId,\n      zome_name: this.zomeName,\n      fn_name: fn_name,\n      payload: payload,\n      provenance: this.cellId[1],\n    });\n  }\n}\n"]}